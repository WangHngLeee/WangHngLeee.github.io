<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="OpenCv Learning Notes (1)"><meta name="keywords" content="Image Process,OpenCv"><meta name="author" content="HongLeee"><meta name="copyright" content="HongLeee"><title>OpenCv Learning Notes (1) | Leee's World</title><link rel="shortcut icon" href="/a1.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-7147375581336623',
  enable_page_level_ads: 'true'
});
</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-166070746-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Representation-of-image"><span class="toc-number">1.</span> <span class="toc-text">Representation of image</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mat"><span class="toc-number">2.</span> <span class="toc-text">Mat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Create-Mat-object"><span class="toc-number">3.</span> <span class="toc-text">Create Mat object</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Constructor-method"><span class="toc-number">3.1.</span> <span class="toc-text">Constructor method</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-the-object-with-the-create-function"><span class="toc-number">3.2.</span> <span class="toc-text">Create the object with the create() function</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-objects-using-Matlab"><span class="toc-number">3.3.</span> <span class="toc-text">Create objects using Matlab</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://s1.ax1x.com/2020/05/11/YYYDdf.jpg"></div><div class="author-info__name text-center">HongLeee</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="https://github.com/WangHngLeee">+ Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">141</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">51</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">23</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://res.cloudinary.com/dhgcccpqm/image/upload/v1592016388/Yosemite_zixphv.png)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Leee's World</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a><a class="site-page" href="/">Home</a><a class="site-page" href="/about">About Me</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">OpenCv Learning Notes (1)</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 03-06-2019</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Image-Recognition/">Image Recognition</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="Representation-of-image">Representation of image</h2>
<p>As a computer, an image is just a bunch of dots of varying brightness.<br>
An M by N image can be represented by an M by N matrix. The value of the matrix element indicates the brightness of the pixel at this position. Generally, the larger the pixel value is, the brighter the point will be.</p>
<p>In general, grayscale images are represented by a 2-dimensional matrix, and color (multi-channel) images are represented by a 3-dimensional matrix (M by N by 3).For image display, most devices currently use unsigned 8-bit integer<br>
The number (of type CV_8U) represents the pixel brightness.The order in which image data is stored in the computer memory starts at the top left (or possibly bottom left) of the image, as shown in the figure</p>
<a id="more"></a>
<p>Iij represents the pixel value of row I, column j.If it is a multi-channel image, such as an RGB image, each pixel is represented by three <a href="http://bytes.In" target="_blank" rel="noopener">bytes.In</a> OpenCV, the channel order of RGB image is BGR, as stored<br>
As shown in figure.</p>
<h2 id="Mat">Mat</h2>
<p>In the early OpenCV, IplImage and CvMat data structures were used to represent images.<br>
In the new version of OpenCV, Mat class is introduced, which can manage memory automatically.<br>
With Mat, you no longer have to spend a lot of effort on memory management, and your code becomes cleaner and fewer lines of code.<br>
IplImage and CvMat are still available in the new version of OpenCV, but some of the new functions only provide Mat interfaces.<br>
The Mat class is defined as follows, and the key properties are as follows:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CV_EXPORTS</span> <span class="title">Mat</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"> <span class="comment">// A series of functions</span></span><br><span class="line"> ...</span><br><span class="line"> <span class="comment">/* The flag parameter contains a lot of information about matrices, such as:</span></span><br><span class="line"><span class="comment">- logo Mat</span></span><br><span class="line"><span class="comment">- whether the data is continuous</span></span><br><span class="line"><span class="comment">- depth </span></span><br><span class="line"><span class="comment">- number of channels</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="keyword">int</span> flags;</span><br><span class="line"> <span class="comment">// The dimension of the matrix should be greater than or equal to 2</span></span><br><span class="line"> <span class="keyword">int</span> dims;</span><br><span class="line"> <span class="comment">// The number of rows and columns in the matrix, if the matrix exceeds 2 dimensions, both of these variables have a value of 1</span></span><br><span class="line"> <span class="keyword">int</span> rows, cols;</span><br><span class="line"> <span class="comment">// A pointer to data</span></span><br><span class="line"> uchar* data;</span><br><span class="line"> <span class="comment">// A pointer to a reference count</span></span><br><span class="line"> <span class="comment">// NULL if the data is assigned by the user</span></span><br><span class="line"> <span class="keyword">int</span>* refcount;</span><br><span class="line"><span class="number">24</span></span><br><span class="line"> <span class="comment">// Other member variables and member functions</span></span><br><span class="line"> ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Create-Mat-object">Create Mat object</h2>
<h3 id="Constructor-method">Constructor method</h3>
<p>The Mat class provides a series of constructors that make it easy to create Mat objects as needed.</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Mat <span class="title">M</span><span class="params">(<span class="number">3</span>,<span class="number">2</span>, CV_8UC3, Scalar(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>))</span></span>; </span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"M = "</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; M &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<p>The first line of code creates an image with 3 rows (height) and 2 columns (width), and the image element is an 8-bit unsigned integer type with three channels.All pixel values of the image are initialized to (0, 0,<br>
255).Since the default color order in OpenCV is BGR, this is an all-red image.The second line outputs all the pixel values of an instance M of the Mat class.Mat redefines the &lt;&lt; operator,<br>
With this operator, you can easily output all pixel values without having to use a for loop to output each pixel individually.<br>
The output of the code is shown in the figure</p>
<p>Common constructors are:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Mat::Mat ()</span><br></pre></td></tr></table></figure>
<p>Parameterless construction method;</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Mat::Mat(<span class="keyword">int</span> rows, <span class="keyword">int</span> cols, <span class="keyword">int</span> type)</span><br></pre></td></tr></table></figure>
<p>Create an image with rows, col and type rows.</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Mat::Mat (Size Size, <span class="keyword">int</span> type)</span><br></pre></td></tr></table></figure>
<p>Create an image of size and type.</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Mat::Mat(<span class="keyword">int</span> rows, <span class="keyword">int</span> cols, <span class="keyword">int</span> type, <span class="keyword">const</span> Scalar&amp; s)</span><br></pre></td></tr></table></figure>
<p>Create an image with rows, col and type, and initialize all elements with the value s<br>
…</p>
<p>If more channels are needed, use the macro CV_8UC(n), for example:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Mat <span class="title">M</span><span class="params">(<span class="number">3</span>,<span class="number">2</span>, CV_8UC(<span class="number">5</span>))</span></span>;<span class="comment">// Create images with rows 3, columns 2, and channels 5</span></span><br></pre></td></tr></table></figure>
<h3 id="Create-the-object-with-the-create-function">Create the object with the create() function</h3>
<p>In addition to creating images in the constructor, you can also create images using the create() function of the Mat class. If the create() function specifies the same parameters as before the image, no real memory is used.Application for operation; If the parameters are different, the index of the original data memory is reduced and the memory is reapplied.The use method is as follows:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Mat <span class="title">M</span><span class="params">(<span class="number">2</span>,<span class="number">2</span>, CV_8UC3)</span></span>;<span class="comment">// The constructor creates the image</span></span><br><span class="line">M.create(<span class="number">3</span>,<span class="number">2</span>, CV_8UC2);<span class="comment">// Free up memory to recreate the image</span></span><br></pre></td></tr></table></figure>
<p>Note that the initial value of the image pixel cannot be set using the create() function.</p>
<h3 id="Create-objects-using-Matlab">Create objects using Matlab</h3>
<p>Matlab style functions such as zeros(), ones() and eyes() are provided in OpenCV <a href="http://2.It" target="_blank" rel="noopener">2.It</a> makes the code very simple and easy to use.Using these functions requires specifying the size and type of the image.</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Mat Z = Mat::zeros(<span class="number">2</span>,<span class="number">3</span>, CV_8UC1);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Z = "</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; Z &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">Mat O = Mat::ones(<span class="number">2</span>, <span class="number">3</span>, CV_32F); </span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"O = "</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; O &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">Mat E = Mat::eye(<span class="number">2</span>, <span class="number">3</span>, CV_64F); </span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"E = "</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">" "</span> &lt;&lt; E &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<p>In this code, some type parameters do not indicate the number of channels, in which case it represents a single channel.The output of the above code is shown in the figure</p>
</div></article><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Image-Process/">Image Process</a><a class="post-meta__tags" href="/tags/OpenCv/">OpenCv</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/03/06/Leetcode1/"><i class="fa fa-chevron-left">  </i><span>Leetcode EveryDay 1</span></a></div><div class="next-post pull-right"><a href="/2019/03/01/Tensorflow/"><span>TensorFlow Learning Notes (1)</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="vcomment"></div><script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = 'true' == true ? true : false;
var verify = 'true' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'osOa9nOdMvJ7waVycMHyXcpL-gzGzoHsz',
  appKey:'k2MfP5O1nYredg5XqqbEH6DC',
  placeholder:'Add your first comment here!',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10',
  lang: 'en'
})</script></div></div><footer class="footer-bg" style="background-image: url(https://res.cloudinary.com/dhgcccpqm/image/upload/v1592016388/Yosemite_zixphv.png)"><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2020 By HongLeee</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-glasses"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>