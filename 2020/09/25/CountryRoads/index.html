<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Review | Hard | Country Roads"><meta name="keywords" content="Leetcode,Code-Review,Graph,BFS,DFS"><meta name="author" content="HomLee"><meta name="copyright" content="HomLee"><title>Review | Hard | Country Roads | Leee's World</title><link rel="shortcut icon" href="/a1.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-7147375581336623',
  enable_page_level_ads: 'true'
});
</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-166070746-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#table-tr-td-bgcolor-E74C3C-font-color-white-Country-Roads-font-td-tr-table"><span class="toc-number">1.</span> <span class="toc-text">Country Roads</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Example"><span class="toc-number">1.1.</span> <span class="toc-text">Example</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Solution"><span class="toc-number">1.2.</span> <span class="toc-text">Solution</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Code"><span class="toc-number">1.3.</span> <span class="toc-text">Code</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://s1.ax1x.com/2020/05/11/YYYDdf.jpg"></div><div class="author-info__name text-center">HomLee</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="https://github.com/WangHngLeee">+ Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">180</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">57</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">23</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://s1.ax1x.com/2020/09/11/wYbi7R.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Leee's World</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a><a class="site-page" href="/">Home</a><a class="site-page" href="/about">About Me</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">Review | Hard | Country Roads</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 09-25-2020</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Leetcode-Cracking/">Leetcode Cracking</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="table-tr-td-bgcolor-E74C3C-font-color-white-Country-Roads-font-td-tr-table"><table><tr><td bgcolor="#E74C3C"><font color="white">Country Roads</font></td></tr></table></h2>
<p><a target="_blank" href="https://binarysearch.com/problems/Country-Roads"><font size="4">ðŸ”— Question Link </font></a></p>
<h3 id="Example">Example</h3>
<p>A country can be represented as a tree with <code>N</code> nodes and <code>N-1</code> edges. Each node represents a town, and each edge represents a piece of road.</p>
<p>Youâ€™re given two lists of integers of size <code>N-1</code>, <code>source</code> and <code>dest</code>. The <code>i</code>-th road connects town <code>source[i]</code> to town <code>dest[i]</code>. The roads are bidirectional.</p>
<p>Youâ€™re also given a list of integers <code>population</code> of size <code>N</code>, where <code>population[i]</code> represents the population of the <code>i</code>-th town.</p>
<p>You are looking to upgrade some number of towns into cities.</p>
<p>However, there is a catch: no two cities should be adjacent to each other due to fierce competition, and every node adjacent to a town should be a city to allow easier access to infrastructure. In other words, every road must connect a town and a city.</p>
<p>What is the maximum possible population of all the cities?</p>
<p><strong>Constraints</strong></p>
<ul>
<li><code>N â‰¤ 10000</code></li>
</ul>
<p><strong>Example</strong></p>
<p><strong>Input</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">source = [0, 0, 2, 2]</span><br><span class="line">dest = [1, 2, 4, 3]</span><br><span class="line">population = [5, 7, 3, 2, 4]</span><br></pre></td></tr></table></figure>
<p><strong>Output</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">11</span><br></pre></td></tr></table></figure>
<p><strong>Explanation</strong></p>
<p>We can upgrade cities 0, 3, and 4 to get a population of 11.</p>
<a id="more"></a>
<h3 id="Solution">Solution</h3>
<p>The key point is that, we only need to check the <code>odd</code> and <code>even</code> position. According to the question, we can not set neighboors as two cities, so we can only set a city with a distance of 1. So we can keep record of two sum, one is the final population of cities at even position, and another is the total population of cities at odd position.</p>
<p>After figuring the above out, we can using both <code>DFS</code> and <code>BFS</code> to solve it.</p>
<img src="https://user-images.githubusercontent.com/48079913/94323706-dbf06a00-ff64-11ea-8bfa-d0806a8505f1.png" alt="question image">
<h3 id="Code">Code</h3>
<ul>
<li>
<p>BFS</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    Set&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span>[] source, <span class="keyword">int</span>[] dest, <span class="keyword">int</span>[] population)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// build graph</span></span><br><span class="line">        List&lt;Integer&gt;[] graph = <span class="keyword">new</span> List[source.length+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;graph.length; i++)graph[i] = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;source.length; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> start = source[i];</span><br><span class="line">            <span class="keyword">int</span> end = dest[i];</span><br><span class="line">            graph[start].add(end);</span><br><span class="line">            graph[end].add(start);</span><br><span class="line">        &#125;</span><br><span class="line">        Queue&lt;<span class="keyword">int</span>[]&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">0</span>,<span class="number">0</span>&#125;);</span><br><span class="line">        set.add(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">int</span> res1 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> res2 = <span class="number">0</span>;</span><br><span class="line">        res1+=population[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">int</span>[] temp = queue.poll();</span><br><span class="line">            <span class="keyword">int</span> s = temp[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">int</span> d = temp[<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> next : graph[s])&#123;</span><br><span class="line">                <span class="keyword">if</span>(set.contains(next))<span class="keyword">continue</span>;</span><br><span class="line">                queue.add(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;next, d + <span class="number">1</span>&#125;);</span><br><span class="line">                set.add(next);</span><br><span class="line">                <span class="keyword">if</span>(d % <span class="number">2</span> == <span class="number">0</span>)res2+=population[next];</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(d % <span class="number">2</span> != <span class="number">0</span>)res1 +=population[next];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Math.max(res1,res2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>DFS</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> even = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> odd = <span class="number">0</span>;</span><br><span class="line">    Set&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span>[] source, <span class="keyword">int</span>[] dest, <span class="keyword">int</span>[] population)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Write your code here</span></span><br><span class="line">        <span class="comment">// build graph</span></span><br><span class="line">        List&lt;Integer&gt;[] graph = <span class="keyword">new</span> List[source.length+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;graph.length; i++)graph[i] = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;source.length; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> start = source[i];</span><br><span class="line">            <span class="keyword">int</span> end = dest[i];</span><br><span class="line">            graph[start].add(end);</span><br><span class="line">            graph[end].add(start);</span><br><span class="line">        &#125;</span><br><span class="line">        even += population[<span class="number">0</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;graph.length; i++)&#123;</span><br><span class="line">            dfs(graph,i,<span class="number">0</span>,population);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> Math.max(odd, even);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(List&lt;Integer&gt;[]graph, <span class="keyword">int</span> node, <span class="keyword">int</span> dist,<span class="keyword">int</span>[] p)</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(!set.contains(node))&#123;</span><br><span class="line">            set.add(node);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> next : graph[node])&#123;</span><br><span class="line">                <span class="keyword">if</span>(set.contains(next))<span class="keyword">continue</span>;</span><br><span class="line">                </span><br><span class="line">                dfs(graph,next,dist+<span class="number">1</span>, p);</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(dist % <span class="number">2</span> == <span class="number">0</span>)res2 += p[next];</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(dist % <span class="number">2</span> != <span class="number">0</span>)res1 +=p[next];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</div></article><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Leetcode/">Leetcode</a><a class="post-meta__tags" href="/tags/Code-Review/">Code-Review</a><a class="post-meta__tags" href="/tags/Graph/">Graph</a><a class="post-meta__tags" href="/tags/BFS/">BFS</a><a class="post-meta__tags" href="/tags/DFS/">DFS</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/9999/12/31/problemslist/"><i class="fa fa-chevron-left">  </i><span>Review Problems List ðŸ“Œ</span></a></div><div class="next-post pull-right"><a href="/2020/09/10/1192. Critical Connections in a Network/"><span>Review | Hard | 1192. Critical Connections in a Network</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="vcomment"></div><script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = 'true' == true ? true : false;
var verify = 'true' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'osOa9nOdMvJ7waVycMHyXcpL-gzGzoHsz',
  appKey:'k2MfP5O1nYredg5XqqbEH6DC',
  placeholder:'Add your first comment here!',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10',
  lang: 'en'
})</script></div></div><footer class="footer-bg" style="background-image: url(https://s1.ax1x.com/2020/09/11/wYbi7R.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2020 By HomLee</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-glasses"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>